<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/favicon-v2.ico?v=3" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png?v=3" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg?v=3" />
    <link rel="shortcut icon" href="/favicon-v2.ico?v=3" />
    <title>Watch Detail | Dialed By H</title>
    <meta name="description" content="View details and inquire about this authenticated luxury timepiece available for sourcing through Dialed By H.">
    <meta name="robots" content="index, follow">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Watch Detail | Dialed By H">
    <meta property="og:description" content="Authenticated luxury timepiece available for sourcing through Dialed By H concierge service.">
    <meta property="og:image" content="https://dialedbyhenry.com/images/logo.png">
    <meta property="og:site_name" content="Dialed By H">

    <link href="https://fonts.googleapis.com/css?family=Google+Sans+Text" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        charcoal: '#0a0a0a',
                        ivory: '#f0f0f0',
                        muted: '#888888',
                    },
                    fontFamily: {
                        space: ['"Space Grotesk"', 'sans-serif'],
                        inter: ['"Inter"', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        @import url(https://fonts.googleapis.com/css?family=Google+Sans+Text);
        html {
            font-family: 'Google Sans Text', 'Google Sans';
            font-size: 14px;
            margin: 0; padding: 0;
            background: #0a0a0a; color: #f0f0f0;
        }
        body {
            margin: 0; padding: 0;
            background-color: #0a0a0a; color: #f0f0f0;
            overflow-x: hidden;
            text-transform: uppercase;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0a0a0a; }
        ::-webkit-scrollbar-thumb { background: #333; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
        .nav-link { position: relative; }
        .nav-link::after {
            content: ''; position: absolute; bottom: -2px; left: 0;
            width: 0; height: 1px; background: #f0f0f0; transition: width 0.3s ease;
        }
        .nav-link:hover::after { width: 100%; }

        .glass {
            background: rgba(255,255,255,0.03);
            backdrop-filter: blur(20px) saturate(1.4);
            -webkit-backdrop-filter: blur(20px) saturate(1.4);
            border: 1px solid rgba(255,255,255,0.08);
        }
        .glass-strong {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(40px) saturate(1.6);
            -webkit-backdrop-filter: blur(40px) saturate(1.6);
            border: 1px solid rgba(255,255,255,0.12);
        }
        .glass-subtle {
            background: rgba(255,255,255,0.02);
            backdrop-filter: blur(12px) saturate(1.2);
            -webkit-backdrop-filter: blur(12px) saturate(1.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* Background blur from watch image */
        #bg-blur {
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none;
        }
        #bg-blur img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: blur(60px) saturate(1.4);
            opacity: 0.08;
            transform: scale(1.2);
        }

        .detail-img {
            transition: transform 0.8s ease;
        }
        .detail-img:hover {
            transform: scale(1.03);
        }

        @media (max-width: 639px) {
            #bg-blur img { filter: blur(40px) saturate(1.2); opacity: 0.06; }
        }
    </style>
</head>
<body class="min-h-screen bg-charcoal text-ivory selection:bg-ivory selection:text-charcoal font-inter">

    <!-- BLURRED BACKGROUND -->
    <div id="bg-blur"></div>

    <!-- NAV -->
    <nav class="relative z-10 w-full px-6 sm:px-10 md:px-16 py-5 sm:py-6 flex justify-between items-center">
        <a href="index.html">
            <img src="images/logo.png" alt="Dialed By H" class="h-8 sm:h-10 w-auto object-contain">
        </a>
        <div class="hidden md:flex space-x-8 text-sm font-space font-medium uppercase tracking-widest items-center">
            <a href="about.html" class="nav-link hover:text-muted transition-colors">About Me</a>
            <a href="process.html" class="nav-link hover:text-muted transition-colors">My Process</a>
            <a href="https://dialedbyh.substack.com" target="_blank" rel="noopener noreferrer" class="nav-link hover:text-muted transition-colors">Journal</a>
            <a href="inventory.html" class="bg-ivory text-charcoal px-5 py-2 text-xs font-bold font-space uppercase tracking-widest hover:bg-muted hover:text-white transition-colors">Back to Sourcing</a>
        </div>
        <button onclick="document.getElementById('mobile-menu').style.opacity='1'; document.getElementById('mobile-menu').style.pointerEvents='auto'; document.body.style.overflow='hidden';" class="md:hidden text-ivory">
            <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/>
            </svg>
        </button>
    </nav>

    <!-- MOBILE MENU -->
    <div id="mobile-menu" class="fixed inset-0 z-50 bg-charcoal/95 backdrop-blur-sm flex flex-col items-center justify-center space-y-8 transition-all duration-500 opacity-0 pointer-events-none">
        <button onclick="document.getElementById('mobile-menu').style.opacity='0'; document.getElementById('mobile-menu').style.pointerEvents='none'; document.body.style.overflow='';" class="absolute top-4 right-6 text-ivory">
            <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
        </button>
        <a href="about.html" class="text-2xl font-space font-bold uppercase tracking-widest hover:text-muted transition-colors">About Me</a>
        <a href="process.html" class="text-2xl font-space font-bold uppercase tracking-widest hover:text-muted transition-colors">My Process</a>
        <a href="https://dialedbyh.substack.com" target="_blank" rel="noopener noreferrer" class="text-2xl font-space font-bold uppercase tracking-widest hover:text-muted transition-colors">Journal</a>
        <a href="inventory.html" class="bg-ivory text-charcoal px-8 py-3 text-sm font-bold font-space uppercase tracking-widest hover:bg-muted hover:text-white transition-colors">Back to Sourcing</a>
    </div>

    <!-- MAIN CONTENT -->
    <main id="watch-detail" class="relative z-10 max-w-6xl mx-auto px-6 py-10 sm:py-16">
        <!-- Loading state -->
        <div id="loading-state" class="flex items-center justify-center py-32">
            <div class="text-center">
                <div class="w-10 h-10 border-2 border-ivory/20 border-t-ivory rounded-full animate-spin mx-auto mb-4"></div>
                <p class="text-muted text-xs font-space tracking-widest">Loading piece details...</p>
            </div>
        </div>
    </main>

    <!-- SUCCESS OVERLAY -->
    <div id="success-overlay" class="fixed inset-0 z-50 flex items-center justify-center opacity-0" style="visibility:hidden; pointer-events:none;">
        <div class="absolute inset-0 bg-black/70 backdrop-blur-xl"></div>
        <div class="relative z-10 glass-strong rounded-2xl p-8 sm:p-12 max-w-sm mx-4 text-center">
            <button onclick="closeSuccessOverlay()" class="absolute top-3 right-3 w-9 h-9 flex items-center justify-center bg-charcoal/80 backdrop-blur-sm border border-ivory/20 rounded-full text-muted hover:text-ivory hover:bg-charcoal transition-all duration-200">
                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M18 6L6 18M6 6l12 12"/></svg>
            </button>
            <div class="w-16 h-16 border border-ivory rounded-full flex items-center justify-center mb-6 mx-auto">
                <i data-lucide="check" class="w-8 h-8"></i>
            </div>
            <h3 class="text-xl font-space font-bold tracking-widest mb-2">Inquiry Received</h3>
            <p class="text-muted text-xs tracking-wide">Henry will contact you shortly.</p>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="relative z-10 px-6 py-12 border-t border-ivory/10 text-center">
        <div class="flex justify-center gap-8 sm:gap-12 mb-4">
            <a href="https://www.instagram.com/dialedbyh/" target="_blank" rel="noopener noreferrer" class="text-muted hover:text-ivory transition-colors">
                <i data-lucide="instagram" class="w-5 h-5"></i>
            </a>
            <a href="https://wa.me/19146211848" target="_blank" rel="noopener noreferrer" class="text-muted hover:text-ivory transition-colors">
                <i data-lucide="message-circle" class="w-5 h-5"></i>
            </a>
            <a href="mailto:dialedbyh@gmail.com" target="_blank" rel="noopener noreferrer" class="text-muted hover:text-ivory transition-colors">
                <i data-lucide="mail" class="w-5 h-5"></i>
            </a>
        </div>
        <span class="block mt-6 text-xs text-muted/60 font-space uppercase tracking-widest">&copy; 2026 DIALED BY H</span>
        <p class="text-[10px] text-muted/30 font-inter max-w-lg mx-auto mb-6 leading-relaxed" style="text-transform: none; font-style: italic;">Dialed By H is an independent sourcing firm and is not affiliated with Rolex, Patek Philippe, Audemars Piguet, or any respective brand. All trademarks belong to their respective owners. Images are used for identification purposes only.</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script>
        let currentWatch = null;

        async function fetchWatch() {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            if (!id) return null;
            try {
                const res = await fetch(`/.netlify/functions/get-inventory?id=${id}`);
                if (!res.ok) return null;
                return await res.json();
            } catch (err) {
                console.error('Failed to fetch watch:', err);
                return null;
            }
        }

        function renderWatchDetail(watch) {
            const main = document.getElementById('watch-detail');
            const loading = document.getElementById('loading-state');

            if (!watch) {
                main.innerHTML = `
                    <div class="text-center py-20">
                        <h2 class="font-space font-bold text-3xl tracking-tight mb-4">Piece Not Found</h2>
                        <p class="text-muted text-sm mb-8">This piece may no longer be available for sourcing.</p>
                        <a href="inventory.html" class="inline-block bg-ivory text-charcoal px-8 py-4 font-bold font-space uppercase tracking-widest hover:bg-white transition-colors">Browse All Pieces</a>
                    </div>
                `;
                return;
            }

            // Set background blur
            if (watch.image) {
                const bgBlur = document.getElementById('bg-blur');
                bgBlur.innerHTML = `<img src="${watch.image}" alt="">`;
            }

            // Update page title
            const displayName = watch.name + (watch.nickname ? ' "' + watch.nickname + '"' : '');
            document.title = `${displayName} | Dialed By H`;

            // Build specs
            const specEntries = [
                ['Brand', watch.brand],
                ['Model', watch.model],
                ['Reference', watch.ref],
                ['Nickname', watch.nickname],
                ['Year', watch.year],
                ['Case Material', watch.caseMaterial],
                ['Case Size', watch.caseSize],
                ['Dial Color', watch.dialColor],
                ['Bracelet / Strap', watch.bracelet],
                ['Condition', watch.condition],
                ['Set', watch.set]
            ].filter(([, val]) => val);

            const detailBrand = (watch.brand || '').toUpperCase();
            const detailImgSize = detailBrand === 'ROLEX' ? '75%' : detailBrand === 'TUDOR' ? '75%' : detailBrand.includes('AUDEMARS') ? '50%' : detailBrand.includes('RICHARD') ? '110%' : detailBrand.includes('PATEK') ? '50%' : detailBrand.includes('JOURNE') ? '50%' : '75%';

            const specsHTML = specEntries.map(([key, val]) => `
                <div class="flex justify-between items-start py-3.5 border-b border-ivory/5 last:border-0">
                    <span class="text-muted text-[11px] font-bold tracking-widest">${key}</span>
                    <span class="text-ivory text-[11px] font-space tracking-wide text-right max-w-[55%]">${val}</span>
                </div>
            `).join('');

            main.innerHTML = `
                <!-- BREADCRUMB -->
                <div class="mb-8">
                    <a href="inventory.html" class="text-muted text-xs font-space tracking-widest hover:text-ivory transition-colors inline-flex items-center gap-2">
                        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M19 12H5m0 0l7 7m-7-7l7-7"/></svg>
                        Back to All Pieces
                    </a>
                </div>

                <!-- TWO COLUMN LAYOUT -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 lg:gap-16">
                    <!-- LEFT: IMAGE -->
                    <div class="relative">
                        ${watch.image
                            ? `<div class="glass rounded-2xl overflow-hidden bg-[#111] aspect-square flex items-center justify-center relative">
                                <img src="${watch.image}" alt="${displayName}" class="detail-img" style="width:${detailImgSize};height:${detailImgSize};object-fit:contain;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="absolute inset-0 items-center justify-center" style="display:none;">
                                    <span class="text-muted/40 text-sm font-space tracking-widest">Image Coming Soon</span>
                                </div>
                               </div>`
                            : `<div class="glass rounded-2xl overflow-hidden aspect-square flex items-center justify-center bg-[#111]">
                                <span class="text-muted/40 text-sm font-space tracking-widest">Image Coming Soon</span>
                               </div>`
                        }
                        ${watch.condition
                            ? `<div class="absolute top-4 right-4">
                                <span class="glass-strong rounded-full px-4 py-2 text-[10px] font-space font-bold tracking-widest">${watch.condition}</span>
                               </div>`
                            : ''
                        }
                    </div>

                    <!-- RIGHT: INFO -->
                    <div class="flex flex-col">
                        <div class="mb-6">
                            <p class="text-muted text-[11px] font-bold tracking-[0.2em] mb-2">${watch.brand}</p>
                            <h1 class="font-space font-bold text-2xl sm:text-3xl md:text-4xl lg:text-5xl tracking-tighter leading-[0.95] mb-3">${displayName}</h1>
                            ${watch.ref ? `<p class="text-muted text-sm font-bold tracking-widest">Ref. ${watch.ref}</p>` : ''}
                        </div>

                        ${watch.details ? `<p class="text-ivory/60 text-sm font-inter leading-relaxed tracking-wide mb-8">${watch.details}</p>` : ''}

                        <!-- INQUIRE CTA -->
                        <div class="glass rounded-xl p-6 mb-8">
                            <p class="text-ivory/70 text-xs font-inter tracking-wide mb-5 leading-relaxed">
                                Interested in this piece? Inquire below and I'll get back to you with sourcing details, pricing, and availability.
                            </p>
                            <button onclick="document.getElementById('inquiry-section').scrollIntoView({behavior:'smooth'})"
                                class="w-full bg-ivory text-charcoal py-4 font-bold font-space uppercase tracking-widest hover:bg-white transition-colors">
                                Inquire to Source
                            </button>
                        </div>

                        <!-- TRUST BADGES -->
                        <div class="flex flex-wrap gap-3 mb-8">
                            <div class="glass-subtle rounded-lg px-4 py-2.5 flex items-center gap-2">
                                <i data-lucide="shield-check" class="w-4 h-4 text-ivory/50"></i>
                                <span class="text-[10px] font-bold tracking-widest text-ivory/50">Authenticated</span>
                            </div>
                            <div class="glass-subtle rounded-lg px-4 py-2.5 flex items-center gap-2">
                                <i data-lucide="package" class="w-4 h-4 text-ivory/50"></i>
                                <span class="text-[10px] font-bold tracking-widest text-ivory/50">Insured Shipping</span>
                            </div>
                            <div class="glass-subtle rounded-lg px-4 py-2.5 flex items-center gap-2">
                                <i data-lucide="lock" class="w-4 h-4 text-ivory/50"></i>
                                <span class="text-[10px] font-bold tracking-widest text-ivory/50">Secure Transaction</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SPECIFICATIONS -->
                <div class="mt-16 sm:mt-20">
                    <h2 class="font-space font-bold text-2xl sm:text-3xl tracking-tight mb-8">Specifications</h2>
                    <div class="glass rounded-xl p-6 sm:p-8">
                        ${specsHTML}
                    </div>
                </div>

                <!-- INQUIRY FORM -->
                <div id="inquiry-section" class="mt-16 sm:mt-20 scroll-mt-8">
                    <h2 class="font-space font-bold text-2xl sm:text-3xl tracking-tight mb-4">Inquire About This Piece</h2>
                    <p class="text-muted text-sm font-inter tracking-wide mb-8 max-w-lg">
                        Provide your details and I'll reach out with sourcing information, pricing, and next steps.
                    </p>
                    <div class="glass rounded-xl p-6 sm:p-8 max-w-xl">
                        <form id="inquiry-form" onsubmit="event.preventDefault(); submitInquiry(this);" class="space-y-5">
                            <div>
                                <label class="block text-[10px] font-bold tracking-widest text-muted mb-2">Full Name</label>
                                <input required type="text" name="fullName" class="w-full bg-transparent border border-ivory/20 p-3 text-ivory focus:border-ivory outline-none transition-colors uppercase">
                            </div>
                            <div>
                                <label class="block text-[10px] font-bold tracking-widest text-muted mb-2">Email</label>
                                <input required type="email" name="email" class="w-full bg-transparent border border-ivory/20 p-3 text-ivory focus:border-ivory outline-none transition-colors uppercase">
                            </div>
                            <div class="pt-2 pb-1">
                                <p class="text-[10px] font-bold tracking-widest text-muted mb-3">Your Preferences</p>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-[9px] font-bold tracking-widest text-muted/60 mb-1.5">Preferred Year</label>
                                        <select name="prefYear" class="w-full bg-charcoal border border-ivory/20 p-3 text-ivory focus:border-ivory outline-none transition-colors uppercase appearance-none cursor-pointer text-xs">
                                            <option value="" class="bg-charcoal">Any Year</option>
                                            <option value="2025" class="bg-charcoal">2025</option>
                                            <option value="2024" class="bg-charcoal">2024</option>
                                            <option value="2023" class="bg-charcoal">2023</option>
                                            <option value="2022" class="bg-charcoal">2022</option>
                                            <option value="2021" class="bg-charcoal">2021</option>
                                            <option value="2020" class="bg-charcoal">2020</option>
                                            <option value="2019 or older" class="bg-charcoal">2019 or Older</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-[9px] font-bold tracking-widest text-muted/60 mb-1.5">Condition</label>
                                        <select name="prefCondition" class="w-full bg-charcoal border border-ivory/20 p-3 text-ivory focus:border-ivory outline-none transition-colors uppercase appearance-none cursor-pointer text-xs">
                                            <option value="" class="bg-charcoal">Any Condition</option>
                                            <option value="Brand New" class="bg-charcoal">Brand New</option>
                                            <option value="Like New" class="bg-charcoal">Like New</option>
                                            <option value="Excellent" class="bg-charcoal">Excellent</option>
                                            <option value="Very Good" class="bg-charcoal">Very Good</option>
                                            <option value="Good" class="bg-charcoal">Good</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-[9px] font-bold tracking-widest text-muted/60 mb-1.5">Set</label>
                                        <select name="prefSet" class="w-full bg-charcoal border border-ivory/20 p-3 text-ivory focus:border-ivory outline-none transition-colors uppercase appearance-none cursor-pointer text-xs">
                                            <option value="" class="bg-charcoal">Any Set</option>
                                            <option value="Full Set" class="bg-charcoal">Full Set</option>
                                            <option value="Partial Set" class="bg-charcoal">Partial Set</option>
                                            <option value="Watch Only" class="bg-charcoal">Watch Only</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-[9px] font-bold tracking-widest text-muted/60 mb-1.5">Price Range</label>
                                        <select name="prefPrice" class="w-full bg-charcoal border border-ivory/20 p-3 text-ivory focus:border-ivory outline-none transition-colors uppercase appearance-none cursor-pointer text-xs">
                                            <option value="" class="bg-charcoal">Any Budget</option>
                                            <option value="Under $10K" class="bg-charcoal">Under $10K</option>
                                            <option value="$10K - $25K" class="bg-charcoal">$10K - $25K</option>
                                            <option value="$25K - $50K" class="bg-charcoal">$25K - $50K</option>
                                            <option value="$50K - $100K" class="bg-charcoal">$50K - $100K</option>
                                            <option value="$100K - $250K" class="bg-charcoal">$100K - $250K</option>
                                            <option value="$250K+" class="bg-charcoal">$250K+</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label class="block text-[10px] font-bold tracking-widest text-muted mb-2">Message (Optional)</label>
                                <textarea rows="3" name="message" placeholder="Any other questions or details..." class="w-full bg-transparent border border-ivory/20 p-3 text-ivory focus:border-ivory outline-none transition-colors uppercase placeholder-muted/40"></textarea>
                            </div>
                            <button type="submit" class="w-full bg-ivory text-charcoal py-4 font-bold font-space tracking-widest hover:bg-white transition-colors">
                                Submit Inquiry
                            </button>
                        </form>
                    </div>
                </div>
            `;

            lucide.createIcons();
        }

        async function submitInquiry(formEl) {
            const watch = currentWatch;
            const btn = formEl.querySelector('button[type="submit"]');
            const formData = new FormData(formEl);

            const displayName = watch ? watch.name + (watch.nickname ? ' "' + watch.nickname + '"' : '') : '';

            // Build preferences string
            const prefs = [];
            const prefYear = formData.get('prefYear');
            const prefCondition = formData.get('prefCondition');
            const prefSet = formData.get('prefSet');
            const prefPrice = formData.get('prefPrice');
            if (prefYear) prefs.push('Year: ' + prefYear);
            if (prefCondition) prefs.push('Condition: ' + prefCondition);
            if (prefSet) prefs.push('Set: ' + prefSet);
            if (prefPrice) prefs.push('Budget: ' + prefPrice);

            const message = formData.get('message') || '';
            const prefsStr = prefs.length ? 'Preferences: ' + prefs.join(', ') : '';
            const details = [prefsStr, message].filter(Boolean).join(' | ');

            const payload = {
                type: 'WATCH_DETAIL',
                fullName: formData.get('fullName'),
                email: formData.get('email'),
                watchName: displayName || null,
                watchRef: watch ? watch.ref : null,
                watchDetails: details || null
            };

            if (btn) { btn.innerText = 'Processing...'; btn.disabled = true; }

            try {
                const res = await fetch('/.netlify/functions/submit-form', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!res.ok) throw new Error('Submission failed');
                showSuccess();
            } catch (error) {
                console.error('Submission error:', error);
                if (window.location.protocol === 'file:' || (window.location.hostname === 'localhost' && error.message.includes('Failed to fetch'))) {
                    showSuccess();
                    return;
                }
                if (btn) { btn.innerText = 'Error - Try Again'; btn.disabled = false; }
            }
        }

        function showSuccess() {
            const overlay = document.getElementById('success-overlay');
            overlay.style.visibility = 'visible';
            overlay.style.pointerEvents = 'auto';
            document.body.style.overflow = 'hidden';
            gsap.to(overlay, { opacity: 1, duration: 0.4, ease: 'power2.out' });
            gsap.fromTo(overlay.querySelector('.glass-strong'),
                { y: 20, opacity: 0, scale: 0.95 },
                { y: 0, opacity: 1, scale: 1, duration: 0.5, ease: 'power3.out' }
            );
            lucide.createIcons();
        }

        function closeSuccessOverlay() {
            const overlay = document.getElementById('success-overlay');
            gsap.to(overlay.querySelector('.glass-strong'),
                { y: 20, opacity: 0, scale: 0.95, duration: 0.3, ease: 'power2.in' }
            );
            gsap.to(overlay, {
                opacity: 0, duration: 0.4, delay: 0.1,
                onComplete: () => {
                    window.location.reload();
                }
            });
        }

        // INIT
        document.addEventListener('DOMContentLoaded', async () => {
            lucide.createIcons();
            gsap.registerPlugin(ScrollTrigger);

            gsap.from('nav', { opacity: 0, y: -20, duration: 0.8, ease: 'power2.out' });

            currentWatch = await fetchWatch();
            renderWatchDetail(currentWatch);

            // Animate content in
            setTimeout(() => {
                const breadcrumb = document.querySelector('#watch-detail > div:first-child');
                if (breadcrumb) gsap.from(breadcrumb, { opacity: 0, y: 10, duration: 0.5, ease: 'power2.out' });

                const cols = document.querySelectorAll('#watch-detail .grid > div');
                if (cols.length) {
                    gsap.from(cols[0], { opacity: 0, x: -30, duration: 0.8, ease: 'power3.out', delay: 0.1 });
                    gsap.from(cols[1], { opacity: 0, x: 30, duration: 0.8, ease: 'power3.out', delay: 0.2 });
                }

                // Specs section
                const specsSection = document.querySelector('#watch-detail > div:nth-child(3)');
                if (specsSection) {
                    gsap.from(specsSection, {
                        scrollTrigger: { trigger: specsSection, start: 'top 85%' },
                        opacity: 0, y: 30, duration: 0.7, ease: 'power2.out'
                    });
                }

                // Inquiry section
                const inquirySection = document.getElementById('inquiry-section');
                if (inquirySection) {
                    gsap.from(inquirySection, {
                        scrollTrigger: { trigger: inquirySection, start: 'top 85%' },
                        opacity: 0, y: 30, duration: 0.7, ease: 'power2.out'
                    });
                }
            }, 50);
        });
    </script>
</body>
</html>
